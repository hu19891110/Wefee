{extend name="layout:base" /}

{block name="body"}

{include file="common:nav" /}

<div class="container">
    <div class="row bg-fff mt-20 pt-15-pb-15">

        <div class="col-lg-12">
            <a href="{:url('index/rule/add')}" class="btn btn-primary">添加规则</a>
        </div>

        <div class="col-lg-12 pt-15-pb-15">
            <div class="panel panel-default">
                <div class="panel-heading">
                    筛选
                </div>
                <div class="panel-body">
                    <form class="form-horizontal" action="" method="get">
                        <div class="form-group">
                            <label class="control-label col-sm-2">规则名</label>
                            <div class="col-sm-10">
                                <input type="text" name="rule_name"  value="{:request()->get('rule_name')}" class="form-control" placeholder="输入规则名关键字">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-2">规则状态</label>
                            <div class="col-sm-10">
                                <input type="radio" name="rule_status" value="all" {:in_array(request()->get('rule_status'), [1,-1]) ? '' : 'checked'}> 全部
                                <input type="radio" name="rule_status" value="1" {:request()->get('rule_status') == 1 ? 'checked' : ''}> 正常
                                <input type="radio" name="rule_status" value="-1" {:request()->get('rule_status') == -1 ? 'checked' : ''}> 停止
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-10 col-sm-offset-2">
                                <button type="submit" class="btn btn-primary">确定</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        {volist name="rules" id="rule"}
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <b>{$rule->rule_name}</b>
                </div>
                <div class="panel-body">
                    <p>排序：<span class="label label-warning">{$rule->rule_sort}</span></p>
                    <p>
                        规则：
                        <span class="label label-danger">
                        {switch name="rule.rule_type"}
                            {case value="equal"}完全相等{/case}
                            {case value="include"}包含{/case}
                            {case value="reg"}正则{/case}
                        {/switch}
                        </span>
                    </p>
                    <p>内容：<span class="label label-success">{$rule->rule_content}</span></p>
                    <p>状态：<span class="label label-info">{$rule['rule_status'] == 1 ? '正常' : '停止'}</span></p>
                </div>
                <div class="panel-footer text-right">
                    <a onclick="if (confirm('确定删除？')) { location.href = '{:url('index/rule/delete', ['id' => $rule['id']])}'; }" class="btn btn-danger delete">删除</a>
                    <a href="{:url('index/rule/edit', ['id' => $rule['id']])}" class="btn btn-warning">编辑</a>
                </div>
            </div>
        </div>
        {/volist}

        <div class="col-lg-12 text-center">
            {$rules->render()}
        </div>

    </div>
</div>

{include file="common:footer" /}

{/block}

{block name="footer"}
<script>
    require(["icheck"], function () {
        $('input').iCheck({
            checkboxClass: 'icheckbox_minimal-green',
            radioClass: 'iradio_minimal-green',
            increaseArea: '20%'
        });
    });
</script>
{/block}